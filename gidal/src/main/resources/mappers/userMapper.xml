<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="org.gidal.mapper.UserMapper">

	<insert id="userjoin">
		insert into user(user_email,user_password,user_name,user_gender,user_phoneNum) values (#{user_email},#{user_password},#{user_name},#{user_gender},#{user_phoneNum})
	</insert>

	<select id="login" resultType="org.gidal.user.domain.UserVO">
		select * from user where user_email = #{user_email} and user_password = #{user_password}
	</select>

	<!-- <update id="">
		update user set enterprise_sectors = #{enterprise_sectors}, enterprise_service = #{enterprise_service}, enterprise_mainImg = #{enterprise_mainImg}, enterprise_img1 = #{enterprise_img1},
		enterprise_img2 = #{enterprise_img2}, enterprise_img3 = #{enterprise_img3}, enterprise_img4 = #{enterprise_img4}, enterprise_address = #{enterprise_address}, enterprise_addressDetail = #{enterprise_addressDetail},
		enterprise_operatingTime = #{enterprise_operatingTime}, enterprise_breakTime = #{enterprise_breakTime}, enterprise_closed = #{enterprise_closed} where enterprise_email = #{enterprise_email}
	</update> -->

	<delete id="delete">
		delete from user where user_email = #{user_email}
	</delete>

<<<<<<< HEAD
	<select id="UserPageReserve" resultType="org.gidal.user.domain.UserPageVO">
		select 
		a.enterprise_businessName,b.reserve_personnel,b.reserve_datetime,b.user_name 
		from enterprise a inner join reserve b 
		on a.enterprise_code = b.enterprise_code
		ORDER BY 
			reserve_code DESC
		LIMIT 
			#{startRow}, 10;
	</select>
	
	<select id="UserPageReserveCount" resultType="int">
		<![CDATA[
		SELECT 
			count(reserve_code) 
		FROM 
			reserve 
		
		]]>
	</select>
	
	<select id="UserPageWaiting" resultType="org.gidal.user.domain.UserPageWaitingVO">
			select a.enterprise_businessName,b.waiting_personnel,b.waiting_now,b.user_name 
			from enterprise a inner join waiting b 
			on a.enterprise_code = b.enterprise_code
			ORDER BY 
			waiting_code DESC
			LIMIT 
			#{startRow}, 10;		
			
=======
	<select id="emailCheck"
	    parameterType="org.gidal.enterprise.domain.EnterpriseVO" resultType="java.lang.Integer">
	    SELECT IFNULL(COUNT(*),0)
	    FROM user WHERE user_email=#{user_email}
>>>>>>> branch 'master' of https://github.com/noel88/gidal.git
	</select>

	<select id="UserPageWaitingCount" resultType="int">
		<![CDATA[
		SELECT 
			count(waiting_code) 
		FROM 
			waiting
		
		]]>
	</select>

</mapper>