<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="org.gidal.mapper.ReviewMapper">

	<insert id="userReview">
		insert into review (review_code, reserveAndWaiting_code, enterprise_code, review_text, user_email, review_scope) values(#{review_code}, #{reserveAndWaiting_code}, #{enterprise_code}, #{review_text}, #{user_email}, #{review_scope})
	</insert>

	<select id="view" resultType="org.gidal.review.domain.ReviewVO">
		select * from review where review_code = #{review_code}
	</select>

	<update id="reviewUpdate">
		update review set review_scope = #{review_scope}, reveiw_text = #{review_text}
	</update>

	<update id="commandCreate">
		update review set review_commandText = #{review_commandText} where review_code = #{review_code} and enterprise_code = #{enterprise_code}
	</update>

	<update id="commandDelete">
		update review set review_commandText = #{review_commandText} where review_code = #{review_code}
	</update>

	<delete id="reviewDelete">
		delete from review where user_email = #{user_email}
	</delete>

	<select id="ent_review_waiting" resultType="org.gidal.review.domain.ReviewVO">
		select * from review where enterprise_code = #{enterprise_code} and reserveAndWaiting_code like 'w%'
	</select>

	<select id="ent_review_reserve" resultType="org.gidal.review.domain.ReviewVO">
		select * from review where enterprise_code = #{enterprise_code} and reserveAndWaiting_code like 'r%'
	</select>
	


</mapper>